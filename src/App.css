.app {
  display:flex;
  flex-direction:column;
  min-height:100vh;
  position:relative
}
.topbar {
  display:grid;
  grid-template-columns:auto 1fr auto;
  align-items:center;
  gap:var(--space-md);
  padding:var(--space-sm) var(--space-2xl);
  min-height:var(--header-height);
  background:var(--surface);
  border-bottom:1px solid var(--line);
  box-shadow:var(--shadow-sm);
  position:sticky;
  top:0;
  z-index:100;
  transition:background-color var(--transition-base), box-shadow var(--transition-base), border-color var(--transition-base)
}
.topbar-left {
  display:flex;
  align-items:center;
  gap:var(--space-md)
}
.topbar-actions {
  display:flex;
  align-items:center;
  gap:var(--space-sm);
  justify-self:end
}
.brand {
  display:flex;
  align-items:center;
  gap:14px;
  text-decoration:none;
  justify-self:center
}
.brand-link {
  border:none;
  background:transparent;
  cursor:pointer;
  padding:0
}
.brand-link:focus-visible {
  outline:2px solid var(--accent);
  outline-offset:4px;
  border-radius:var(--radius-md)
}
.brand-mark {
  width:34px;
  height:34px;
  border-radius:var(--radius-sm);
  background:var(--surface-strong);
  border:1px solid var(--line-strong);
  position:relative;
  box-shadow:var(--shadow-inner)
}
.brand-name {
  font-family:var(--display-font);
  font-size:1.2rem;
  font-weight:600;
  letter-spacing:-.01em
}
.brand-tag {
  display:none;
  color:var(--muted);
  font-size:.75rem;
  font-family:var(--mono-font);
  letter-spacing:.04em
}
@media(min-width:768px) {
  .brand-tag {
    display:block
  }

}
.theme-toggle {
  display:flex;
  align-items:center;
  justify-content:center;
  width:40px;
  height:40px;
  border-radius:var(--radius-sm);
  background:var(--surface);
  border:1px solid var(--line);
  cursor:pointer;
  transition:all var(--transition-base);
  font-size:1.1rem;
  box-shadow:var(--shadow-sm)
}
.theme-toggle:hover {
  background:var(--surface-hover);
  border-color:var(--accent)
}
.menu-button {
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding:8px 12px;
  border-radius:var(--radius-sm);
  border:1px solid var(--line);
  background:var(--surface);
  cursor:pointer;
  transition:all var(--transition-base);
  box-shadow:var(--shadow-sm)
}
.menu-button:hover {
  background:var(--surface-hover);
  border-color:var(--accent)
}
.menu-lines {
  position:relative;
  width:18px;
  height:2px;
  background:var(--ink);
  border-radius:var(--radius-xs);
  transition:all var(--transition-base)
}
.menu-lines:before, .menu-lines:after {
  content:"";
  position:absolute;
  left:0;
  width:18px;
  height:2px;
  background:var(--ink);
  border-radius:var(--radius-xs);
  transition:all var(--transition-base)
}
.menu-lines:before {
  top:-6px
}
.menu-lines:after {
  top:6px
}
.menu-button.open .menu-lines {
  background:transparent
}
.menu-button.open .menu-lines:before {
  top:0;
  transform:rotate(45deg)
}
.menu-button.open .menu-lines:after {
  top:0;
  transform:rotate(-45deg)
}
.menu-label {
  font-size:.7rem;
  font-weight:500;
  text-transform:uppercase;
  letter-spacing:.08em;
  color:var(--muted);
  font-family:var(--mono-font)
}
.search {
  display:flex;
  align-items:center;
  gap:10px;
  padding:8px 12px;
  border-radius:var(--radius-sm);
  border:1px solid var(--line);
  background:var(--surface);
  min-width:200px;
  transition:all var(--transition-base);
  box-shadow:var(--shadow-inner)
}
.search:focus-within {
  border-color:var(--accent);
  box-shadow:0 0 0 3px var(--accent-soft)
}
.search input {
  border:none;
  background:none;
  padding:0;
  font-size:.9rem;
  flex:1;
  min-width:0
}
.search input:focus {
  box-shadow:none
}
.search-icon {
  color:var(--muted);
  font-size:1rem
}
.search-shortcut {
  font-family:var(--mono-font);
  font-size:.7rem;
  color:var(--muted);
  padding:2px 6px;
  border:1px solid var(--line);
  border-radius:var(--radius-xs);
  background:var(--surface-strong)
}
.kbd {
  display:none;
  padding:3px 8px;
  font-size:.7rem;
  font-family:var(--body-font);
  font-weight:500;
  background:var(--surface-strong);
  border:1px solid var(--line);
  border-radius:var(--radius-xs);
  color:var(--muted)
}
@media(min-width:768px) {
  .kbd {
    display:inline-block
  }

}
.drawer-scrim {
  position:fixed;
  inset:0;
  background:rgba(0, 0, 0, .35);
  z-index:90;
  opacity:0;
  visibility:hidden;
  transition:all var(--transition-base)
}
.drawer-scrim.open {
  opacity:1;
  visibility:visible
}
.sidebar {
  position:fixed;
  top:0;
  left:0;
  bottom:0;
  width:var(--sidebar-width);
  background:var(--surface);
  border-right:1px solid var(--line);
  box-shadow:inset -1px 0 0 var(--line-strong);
  z-index:95;
  transform:translate(-100%);
  transition:transform var(--transition-slow);
  display:flex;
  flex-direction:column;
  overflow:hidden
}
.sidebar.open {
  transform:translate(0)
}
.sidebar-header {
  padding:var(--space-lg);
  border-bottom:1px solid var(--line);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--space-md)
}
.sidebar-title {
  font-size:.75rem;
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:.1em;
  color:var(--muted);
  margin:0;
  font-family:var(--mono-font)
}
.sidebar-nav {
  flex:1;
  overflow-y:auto;
  padding:var(--space-md);
  display:flex;
  flex-direction:column;
  gap:var(--space-sm)
}
.nav-section {
  margin-bottom:var(--space-lg)
}
.nav-section-title {
  font-size:.7rem;
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:.1em;
  color:var(--muted-soft);
  padding:var(--space-sm) var(--space-md);
  margin-bottom:var(--space-xs);
  font-family:var(--mono-font)
}
.nav-item {
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  gap:4px;
  padding:10px 12px;
  border-radius:var(--radius-sm);
  color:var(--ink-secondary);
  font-weight:500;
  cursor:pointer;
  transition:color var(--transition-fast), border-color var(--transition-fast), transform var(--transition-fast);
  border:1px solid transparent;
  background:transparent;
  width:100%;
  text-align:left;
  position:relative;
  overflow:hidden
}
.nav-item:before {
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(90deg, var(--accent-soft), transparent 70%);
  opacity:0;
  transform:translateX(-6px);
  transition:opacity var(--transition-base), transform var(--transition-base);
  pointer-events:none
}
.nav-item:after {
  content:"";
  position:absolute;
  left:0;
  top:10px;
  bottom:10px;
  width:3px;
  background:var(--accent);
  opacity:0;
  transition:opacity var(--transition-fast);
  pointer-events:none
}
.nav-item:hover {
  background:var(--surface-strong);
  color:var(--ink);
  border-color:var(--line)
}
.nav-item:hover:before {
  opacity:.65;
  transform:translateX(0)
}
.nav-item.active {
  background:var(--surface-strong);
  color:var(--ink);
  border-color:var(--line-strong);
  font-weight:600
}
.nav-item.active:before {
  opacity:1;
  transform:translateX(0)
}
.nav-item.active:after {
  opacity:1
}
.nav-item-title {
  font-size:.95rem;
  font-weight:600
}
.nav-desc {
  font-size:.8rem;
  color:var(--muted);
  font-family:var(--mono-font)
}
.nav-item-icon {
  font-size:1.1rem;
  width:24px;
  text-align:center
}
.nav-item-count {
  margin-left:auto;
  font-size:.75rem;
  padding:2px 8px;
  border-radius:var(--radius-sm);
  background:var(--surface-strong);
  color:var(--muted)
}
.sidebar-card {
  margin:var(--space-md);
  padding:var(--space-md);
  background:var(--surface);
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  box-shadow:var(--shadow-sm)
}
.shell {
  flex:1;
  padding:var(--space-xl) var(--space-2xl);
  width:100%
}
.main {
  width:100%;
  max-width:var(--content-max-width);
  margin:0 auto
}
.workspace-shell .main {
  max-width:none;
  margin:0
}
.workspace-shell {
  padding:var(--space-lg) var(--space-2xl) var(--space-3xl)
}
@media(min-width:1200px) {
  .shell {
    padding:var(--space-2xl) var(--space-3xl);
    margin-right:0;
    width:100%
  }
  .shell.with-nav {
    margin-left:var(--sidebar-width);
    width:calc(100% - var(--sidebar-width))
  }
  .sidebar {
    top:var(--header-height);
    bottom:0
  }
  .drawer-scrim {
    display:none
  }
  .menu-label {
    display:none
  }
}
.btn {
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:var(--space-sm);
  padding:8px 14px;
  font-size:.85rem;
  font-weight:500;
  border-radius:var(--radius-sm);
  cursor:pointer;
  transition:transform var(--transition-base), box-shadow var(--transition-base), border-color var(--transition-base), background-color var(--transition-base), color var(--transition-base);
  border:1px solid var(--line);
  background:var(--surface);
  color:var(--ink);
  white-space:nowrap;
  box-shadow:var(--shadow-sm)
}
.btn:disabled {
  opacity:.5;
  cursor:not-allowed
}
.btn:hover:not(:disabled) {
  transform:translateY(-1px);
  box-shadow:var(--shadow-md);
  border-color:var(--line-strong)
}
.btn:active:not(:disabled) {
  transform:translateY(1px);
  box-shadow:var(--shadow-inner)
}
.btn.primary {
  background:var(--accent);
  border-color:var(--accent);
  color:#fff
}
.btn.primary:hover:not(:disabled) {
  background:var(--accent-hover);
  border-color:var(--accent-hover)
}
.btn.secondary {
  background:var(--surface);
  border:1px solid var(--line);
  color:var(--ink)
}
.btn.secondary:hover:not(:disabled) {
  background:var(--surface-hover);
  border-color:var(--accent)
}
.btn.ghost {
  background:transparent;
  border-color:transparent;
  color:var(--ink-secondary);
  box-shadow:none
}
.btn.ghost:hover:not(:disabled) {
  background:var(--surface-strong);
  color:var(--ink)
}
.btn.danger {
  background:var(--surface);
  color:var(--toast-error);
  border:1px solid rgba(180, 35, 24, .25)
}
.btn.danger:hover:not(:disabled) {
  background:rgba(180, 35, 24, .08);
  border-color:var(--toast-error)
}
.btn.icon-only {
  padding:8px;
  width:34px;
  height:34px
}
.chip {
  display:inline-flex;
  align-items:center;
  padding:2px 8px;
  font-size:.65rem;
  font-weight:600;
  border-radius:var(--radius-xs);
  background:var(--surface-strong);
  border:1px solid var(--line);
  color:var(--ink-secondary);
  font-family:var(--mono-font);
  text-transform:uppercase;
  letter-spacing:.08em
}
.chip.muted {
  background:var(--surface-strong);
  color:var(--muted)
}
.chip.success {
  background:var(--accent-2-soft);
  color:var(--accent-2)
}
.chip-row {
  display:flex;
  flex-wrap:wrap;
  gap:var(--space-sm)
}
.card, .panel-card {
  background:var(--surface);
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  padding:var(--space-lg);
  box-shadow:var(--shadow-sm);
  transition:transform var(--transition-base), box-shadow var(--transition-base), border-color var(--transition-base)
}
.card:hover, .panel-card:hover {
  border-color:var(--line-strong);
  transform:translateY(-2px);
  box-shadow:var(--shadow-md)
}
.panel-card.expandable {
  padding:0
}
.panel-summary {
  list-style:none;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--space-md);
  padding:var(--space-lg);
  cursor:pointer;
  font-weight:600;
  position:relative;
  padding-right:42px
}
.panel-summary::-webkit-details-marker {
  display:none
}
.panel-summary:after {
  content:"v";
  font-size:.8rem;
  color:var(--muted);
  transition:transform var(--transition-base);
  position:absolute;
  right:var(--space-md)
}
.panel-card.expandable[open] .panel-summary {
  border-bottom:1px solid var(--line)
}
.panel-card.expandable[open] .panel-summary:after {
  transform:rotate(180deg)
}
.panel-body {
  padding:var(--space-lg);
  display:flex;
  flex-direction:column;
  gap:var(--space-md)
}
.panel-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--space-md);
  margin-bottom:var(--space-md)
}
.panel-header h3 {
  margin:0;
  font-size:1rem
}
.panel-actions {
  display:flex;
  align-items:center;
  gap:var(--space-sm)
}
.page-header {
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap:var(--space-xl);
  padding-bottom:var(--space-lg);
  border-bottom:1px solid var(--line)
}
.page-header .header-stats {
  display:flex;
  gap:var(--space-lg)
}
.collapsible-card {
  padding:0
}
.collapsible-summary {
  list-style:none;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--space-md);
  padding:var(--space-lg);
  cursor:pointer;
  font-weight:600
}
.collapsible-summary span:first-child {
  font-family:var(--mono-font);
  font-size:.95rem
}
.collapsible-summary:hover {
  background:var(--surface-hover)
}
.collapsible-summary::-webkit-details-marker {
  display:none
}
.collapsible-summary::marker {
  content:""
}
.collapsible-summary:after {
  content:"v";
  font-size:.9rem;
  color:var(--muted);
  transition:transform var(--transition-base)
}
.collapsible-card[open] .collapsible-summary:after {
  transform:rotate(180deg)
}
.collapsible-body {
  padding:0 var(--space-lg) var(--space-lg);
  display:flex;
  flex-direction:column;
  gap:var(--space-md)
}
.home-view {
  display:flex;
  flex-direction:column;
  gap:var(--space-2xl)
}
.home-hero {
  text-align:left;
  padding:var(--space-3xl) var(--space-lg);
  background:var(--surface);
  border-radius:var(--radius-md);
  border:1px solid var(--line);
  position:relative;
  overflow:hidden
}
.home-hero:before {
  content:none
}
.home-hero h1 {
  position:relative;
  margin-bottom:var(--space-md)
}
.lede {
  position:relative;
  color:var(--muted);
  max-width:720px;
  margin:0;
  font-size:1rem
}
.home-layout {
  display:grid;
  grid-template-columns:1fr;
  gap:var(--space-xl)
}
@media(min-width:1024px) {
  .home-layout {
    grid-template-columns:2fr 1fr
  }

}
.home-categories {
  display:flex;
  flex-direction:column;
  gap:var(--space-lg)
}
.category-grid {
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(240px, 1fr));
  gap:var(--space-md)
}
.category-card {
  background:var(--surface);
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  padding:var(--space-lg);
  cursor:pointer;
  transition:transform var(--transition-base), box-shadow var(--transition-base), border-color var(--transition-base);
  text-align:left;
  position:relative;
  overflow:hidden;
  box-shadow:var(--shadow-sm)
}
.category-card:before {
  content:none
}
.category-card:hover {
  border-color:var(--line-strong);
  transform:translateY(-2px);
  box-shadow:var(--shadow-md)
}
.category-card h3 {
  margin:0 0 var(--space-sm);
  font-size:1rem
}
.category-card p {
  margin:0;
  color:var(--muted);
  font-size:.9rem
}
.home-rail {
  display:flex;
  flex-direction:column;
  gap:var(--space-lg)
}
.home-actions {
  background:var(--surface);
  border:1px solid var(--line-strong);
  box-shadow:none
}
.home-actions .btn.primary {
  width:100%;
  justify-content:center
}
.home-actions .home-action-group {
  padding-top:var(--space-sm);
  border-top:1px dashed var(--line)
}
.home-action-group {
  display:flex;
  flex-direction:column;
  gap:var(--space-sm)
}
.quick-stats {
  display:grid;
  grid-template-columns:repeat(2, 1fr);
  gap:var(--space-md)
}
.stat-mini {
  background:var(--surface);
  border:1px solid var(--line);
  border-radius:var(--radius-sm);
  padding:var(--space-md);
  text-align:left
}
.stat-mini-value {
  display:block;
  font-size:1.4rem;
  font-weight:700;
  font-family:var(--display-font);
  color:var(--accent)
}
.stat-mini-label {
  font-size:.75rem;
  color:var(--muted);
  text-transform:uppercase;
  letter-spacing:.05em;
  font-family:var(--mono-font)
}
.phase-header {
  margin-bottom:var(--space-xl)
}
.phase-header h1 {
  margin-bottom:var(--space-sm)
}
.phase-meta-row {
  display:flex;
  align-items:center;
  gap:var(--space-md);
  flex-wrap:wrap
}
.eyebrow {
  font-size:.75rem;
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:.08em;
  color:var(--muted);
  margin-bottom:var(--space-xs);
  font-family:var(--mono-font)
}
.phase-layout {
  display:grid;
  grid-template-columns:1fr;
  gap:var(--space-xl);
  align-items:start
}
@media(min-width:1024px) {
  .phase-layout {
    grid-template-columns:minmax(280px, 320px) minmax(0, 1fr)
  }

}
.phase-list {
  display:flex;
  flex-direction:column;
  gap:var(--space-md)
}
.phase-list-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:var(--space-sm)
}
.phase-list-header h2 {
  font-size:1.1rem;
  margin:0
}
.phase-cards {
  display:flex;
  flex-direction:column;
  gap:var(--space-md)
}
.phase-card {
  background:var(--surface);
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  padding:var(--space-lg);
  cursor:pointer;
  transition:transform var(--transition-base), box-shadow var(--transition-base), border-color var(--transition-base);
  text-align:left;
  position:relative;
  overflow:hidden;
  box-shadow:var(--shadow-sm)
}
.phase-card:before {
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(90deg, var(--accent-soft), transparent 70%);
  opacity:0;
  transform:translateX(-8px);
  transition:opacity var(--transition-base), transform var(--transition-base);
  pointer-events:none
}
.phase-card:after {
  content:"";
  position:absolute;
  left:0;
  top:10px;
  bottom:10px;
  width:3px;
  background:var(--accent);
  border-radius:0;
  opacity:0;
  transition:opacity var(--transition-base);
  pointer-events:none
}
.phase-card:hover {
  border-color:var(--line-strong);
  transform:translateY(-2px);
  box-shadow:var(--shadow-md)
}
.phase-card:hover:before {
  opacity:.6;
  transform:translateX(0)
}
.phase-card:hover:after {
  opacity:1;
  transform:none
}
.phase-card.active {
  background:var(--surface-strong);
  border-color:var(--line-strong);
  box-shadow:var(--shadow-md)
}
.phase-card.active:before {
  opacity:1;
  transform:translateX(0)
}
.phase-card.active:after {
  opacity:1;
  transform:none
}
.phase-range {
  font-size:.75rem;
  font-weight:600;
  color:var(--muted);
  margin:0 0 var(--space-xs);
  font-family:var(--mono-font)
}
.phase-card h3 {
  margin:0;
  font-size:1rem
}
.phase-preview {
  max-height:0;
  opacity:0;
  overflow:hidden;
  margin-top:0;
  transition:max-height var(--transition-base), opacity var(--transition-base), margin-top var(--transition-base)
}
.phase-card:hover .phase-preview,
.phase-card:focus-visible .phase-preview {
  max-height:140px;
  opacity:1;
  margin-top:var(--space-xs)
}
.phase-summary, .phase-card.create p {
  margin:0;
  font-size:.9rem;
  color:var(--muted);
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  overflow:hidden
}
.phase-card.create {
  border-style:dashed;
  background:var(--surface)
}
.phase-card.create h3 {
  margin-bottom:var(--space-sm)
}
.phase-card.create:hover {
  background:var(--surface-strong)
}
.phase-detail {
  display:flex;
  flex-direction:column;
  gap:var(--space-lg)
}
.phase-hero {
  background:var(--surface);
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  padding:var(--space-xl);
  display:flex;
  flex-direction:column;
  gap:var(--space-lg);
  position:relative;
  overflow:hidden;
  box-shadow:var(--shadow-sm)
}
.phase-hero:before {
  content:"";
  position:absolute;
  left:0;
  top:0;
  bottom:0;
  width:3px;
  background:var(--accent);
  opacity:.75;
  pointer-events:none
}
@media(min-width:768px) {
  .phase-hero {
    flex-direction:row;
    align-items:flex-start;
    justify-content:space-between
  }

}
.phase-hero h2 {
  margin:0 0 var(--space-sm)
}
.phase-hero>p {
  color:var(--muted);
  max-width:500px
}
.phase-meta {
  display:flex;
  flex-wrap:wrap;
  gap:var(--space-md);
  align-items:center
}
.phase-meta-actions {
  display:flex;
  gap:var(--space-sm);
  align-items:center;
  margin-left:auto;
  flex-wrap:wrap
}
.phase-action {
  padding:6px 12px;
  font-size:.8rem
}
.phase-action.btn.secondary {
  border-color:var(--accent);
  color:var(--accent)
}
.phase-action.btn.secondary:hover:not(:disabled) {
  background:var(--accent-soft);
  border-color:var(--accent);
  color:var(--accent-hover)
}
.stat {
  text-align:left;
  padding:var(--space-xs) 0
}
.stat-label {
  display:block;
  font-size:.7rem;
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:.08em;
  color:var(--muted);
  margin-bottom:2px;
  font-family:var(--mono-font)
}
.stat-value {
  display:block;
  font-size:1.1rem;
  font-weight:600;
  color:var(--ink)
}
.phase-tabs {
  display:flex;
  gap:var(--space-xl);
  padding:0;
  background:transparent;
  border-radius:0;
  border-bottom:1px solid var(--line)
}
.phase-tab {
  flex:0 0 auto;
  padding:var(--space-sm) 0;
  border-radius:0;
  font-size:.8rem;
  font-weight:600;
  color:var(--muted);
  background:transparent;
  border:none;
  cursor:pointer;
  transition:color var(--transition-fast);
  font-family:var(--mono-font);
  text-transform:uppercase;
  letter-spacing:.14em;
  position:relative
}
.phase-tab:after {
  content:"";
  position:absolute;
  left:0;
  right:0;
  bottom:-1px;
  height:2px;
  background:var(--accent);
  transform:scaleX(0);
  transform-origin:left;
  transition:transform var(--transition-base)
}
.phase-tab:hover {
  color:var(--ink);
  background:transparent
}
.phase-tab:hover:after {
  transform:scaleX(.4)
}
.phase-tab.active {
  background:transparent;
  color:var(--ink)
}
.phase-tab.active:after {
  transform:scaleX(1)
}
.phase-panel {
  display:flex;
  flex-direction:column;
  gap:var(--space-lg)
}
.panel-grid {
  display:grid;
  gap:var(--space-lg)
}
.panel-grid.two-col {
  grid-template-columns:1fr
}
.panel-grid.sources {
  grid-template-columns:minmax(240px, 320px) minmax(0, 1fr);
  align-items:start
}
.panel-grid.sources.empty {
  grid-template-columns:minmax(260px, 520px);
  justify-content:center
}
@media(min-width:900px) {
  .panel-grid.two-col {
    grid-template-columns:repeat(2, 1fr)
  }

}
@media(max-width:900px) {
  .panel-grid.sources {
    grid-template-columns:1fr
  }
  .panel-grid.sources.empty {
    grid-template-columns:1fr
  }
}
.panel-card.upload {
  border-style:dashed;
  background:linear-gradient(180deg, var(--surface), var(--surface-strong))
}
.panel-card.upload h3 {
  margin-top:0
}
.editor {
  width:100%;
  min-height:200px;
  padding:var(--space-md);
  font-family:var(--body-font);
  font-size:.95rem;
  line-height:1.6;
  background:linear-gradient(180deg, var(--surface), var(--surface-strong));
  border:1px solid var(--line);
  border-radius:var(--radius-sm);
  resize:vertical;
  transition:border-color var(--transition-base), box-shadow var(--transition-base), background-color var(--transition-base);
  box-shadow:var(--shadow-inner)
}
.editor.compact {
  min-height:120px
}
.main-point-toolbar {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--space-md)
}
.main-points {
  display:flex;
  flex-direction:column;
  gap:var(--space-sm)
}
.main-point {
  border:1px solid var(--line);
  border-radius:var(--radius-sm);
  background:linear-gradient(160deg, var(--surface-subtle) 0%, var(--surface-strong) 60%, var(--bg-deep) 100%);
  overflow:hidden
}
.main-point-summary {
  list-style:none;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--space-md);
  padding:var(--space-md);
  cursor:pointer;
  font-weight:600;
  position:relative;
  padding-right:42px
}
.main-point-summary::-webkit-details-marker {
  display:none
}
.main-point-summary:after {
  content:"v";
  font-size:.8rem;
  color:var(--muted);
  position:absolute;
  right:var(--space-md);
  transition:transform var(--transition-base)
}
.main-point[open] .main-point-summary {
  border-bottom:1px solid var(--line)
}
.main-point[open] .main-point-summary:after {
  transform:rotate(180deg)
}
.main-point-body {
  padding:var(--space-md);
  display:flex;
  flex-direction:column;
  gap:var(--space-sm)
}
.main-point-actions {
  display:flex;
  justify-content:flex-end
}
.editor:focus {
  border-color:var(--accent);
  box-shadow:0 0 0 3px var(--accent-soft)
}
.source-list {
  list-style:none;
  padding:0;
  margin:var(--space-md) 0
}
.source-list li {
  padding:var(--space-sm) 0;
  color:var(--muted);
  font-size:.85rem;
  border-bottom:1px dashed var(--line)
}
.source-list li:last-child {
  border-bottom:none
}
.subphase-layout {
  display:grid;
  grid-template-columns:1fr;
  gap:var(--space-lg);
  align-items:start
}
@media(min-width:900px) {
  .subphase-layout {
    grid-template-columns:minmax(240px, 320px) minmax(0, 1fr)
  }

}
.subphase-list {
  position:sticky;
  top:calc(var(--header-height) + var(--space-lg));
  align-self:start
}
.subphase-stack {
  display:flex;
  flex-direction:column;
  gap:var(--space-sm)
}
.subphase-card {
  background:var(--surface);
  border:1px solid var(--line);
  border-radius:var(--radius-sm);
  padding:var(--space-md);
  cursor:pointer;
  transition:transform var(--transition-base), box-shadow var(--transition-base), border-color var(--transition-base);
  text-align:left;
  position:relative;
  overflow:hidden;
  box-shadow:var(--shadow-sm)
}
.subphase-card:before {
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(90deg, var(--accent-soft), transparent 70%);
  opacity:0;
  transform:translateX(-8px);
  transition:opacity var(--transition-base), transform var(--transition-base);
  pointer-events:none
}
.subphase-card:after {
  content:"";
  position:absolute;
  left:0;
  top:8px;
  bottom:8px;
  width:3px;
  background:var(--accent);
  opacity:0;
  transition:opacity var(--transition-fast);
  pointer-events:none
}
.subphase-card:hover {
  border-color:var(--line-strong);
  transform:translateY(-1px);
  box-shadow:var(--shadow-md)
}
.subphase-card:hover:before {
  opacity:.6;
  transform:translateX(0)
}
.subphase-card:hover:after {
  opacity:1
}
.subphase-card.active {
  background:var(--surface-strong);
  border-color:var(--line-strong);
  box-shadow:var(--shadow-md)
}
.subphase-card.active:before {
  opacity:1;
  transform:translateX(0)
}
.subphase-card.active:after {
  opacity:1
}
.subphase-card h4 {
  margin:var(--space-xs) 0;
  font-size:1rem
}
.subphase-card-actions {
  position:absolute;
  top:var(--space-sm);
  right:var(--space-sm);
  opacity:0;
  transition:opacity var(--transition-fast)
}
.subphase-card:hover .subphase-card-actions {
  opacity:1
}
.subphase-card-actions .delete {
  padding:4px 8px;
  font-size:.75rem;
  background:var(--surface);
  border:1px solid var(--line);
  border-radius:var(--radius-xs);
  cursor:pointer;
  color:var(--muted);
  transition:all var(--transition-fast)
}
.subphase-card-actions .delete:hover {
  border-color:rgba(180, 35, 24, .4);
  color:var(--toast-error);
  background:rgba(180, 35, 24, .08)
}
.subphase-form {
  display:flex;
  flex-direction:column;
  gap:var(--space-md);
  padding:var(--space-md);
  background:var(--surface-strong);
  border-radius:var(--radius-md)
}
.entity-layout {
  display:grid;
  grid-template-columns:1fr;
  gap:var(--space-xl);
  align-items:start
}
@media(min-width:1024px) {
  .entity-layout {
    grid-template-columns:minmax(280px, 320px) minmax(0, 1fr)
  }

}
.entity-list {
  display:flex;
  flex-direction:column;
  gap:var(--space-md)
}
.entity-list-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:var(--space-sm)
}
.entity-cards {
  display:flex;
  flex-direction:column;
  gap:var(--space-sm)
}
.entity-card {
  background:var(--surface);
  border:1px solid var(--line);
  border-radius:var(--radius-sm);
  padding:var(--space-md);
  cursor:pointer;
  transition:transform var(--transition-base), box-shadow var(--transition-base), border-color var(--transition-base);
  text-align:left;
  position:relative;
  overflow:hidden;
  box-shadow:var(--shadow-sm)
}
.entity-card:before {
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(90deg, var(--accent-soft), transparent 70%);
  opacity:0;
  transform:translateX(-8px);
  transition:opacity var(--transition-base), transform var(--transition-base);
  pointer-events:none
}
.entity-card:after {
  content:"";
  position:absolute;
  left:0;
  top:8px;
  bottom:8px;
  width:3px;
  background:var(--accent);
  opacity:0;
  transition:opacity var(--transition-fast);
  pointer-events:none
}
.entity-card:hover {
  border-color:var(--line-strong);
  transform:translateY(-1px);
  box-shadow:var(--shadow-md)
}
.entity-card:hover:before {
  opacity:.6;
  transform:translateX(0)
}
.entity-card:hover:after {
  opacity:1
}
.entity-card.active {
  background:var(--surface-strong);
  border-color:var(--line-strong);
  box-shadow:var(--shadow-md)
}
.entity-card.active:before {
  opacity:1;
  transform:translateX(0)
}
.entity-card.active:after {
  opacity:1
}
.entity-card h3 {
  margin:0;
  font-size:1rem
}
.entity-preview {
  max-height:0;
  opacity:0;
  overflow:hidden;
  margin-top:0;
  transition:max-height var(--transition-base), opacity var(--transition-base), margin-top var(--transition-base)
}
.entity-card:hover .entity-preview,
.entity-card:focus-visible .entity-preview {
  max-height:140px;
  opacity:1;
  margin-top:var(--space-xs)
}
.entity-preview p {
  margin:0
}
.entity-summary {
  font-size:.85rem;
  color:var(--muted);
  display:-webkit-box;
  -webkit-line-clamp:3;
  -webkit-box-orient:vertical;
  overflow:hidden
}
.entity-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--space-md);
  flex-wrap:wrap
}
.source-grid, .note-grid {
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(220px, 1fr));
  gap:var(--space-md)
}
.source-grid.compact {
  grid-template-columns:repeat(auto-fill, minmax(200px, 1fr))
}
.source-card, .note-card {
  background:var(--surface);
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  padding:var(--space-md);
  transition:transform var(--transition-base), box-shadow var(--transition-base), border-color var(--transition-base);
  position:relative;
  box-shadow:var(--shadow-sm);
  overflow:hidden
}
.source-card:hover, .note-card:hover {
  border-color:var(--line-strong);
  transform:translateY(-1px);
  box-shadow:var(--shadow-md)
}
.source-card:before, .note-card:before {
  content:"";
  position:absolute;
  left:0;
  top:10px;
  bottom:10px;
  width:3px;
  background:var(--accent);
  opacity:0;
  transition:opacity var(--transition-fast);
  pointer-events:none
}
.source-card:hover:before, .note-card:hover:before {
  opacity:.7
}
.source-card h4, .note-card h4 {
  margin:0 0 var(--space-sm);
  font-size:1rem
}
.source-meta {
  display:flex;
  gap:var(--space-md);
  margin-bottom:var(--space-sm);
  font-size:.7rem;
  color:var(--muted);
  font-family:var(--mono-font);
  text-transform:uppercase;
  letter-spacing:.08em
}
.source-excerpt {
  font-size:.9rem;
  color:var(--ink-secondary);
  margin-bottom:var(--space-md)
}
.source-tags {
  display:flex;
  flex-wrap:wrap;
  gap:var(--space-xs)
}
.source-tag {
  padding:2px 8px;
  font-size:.65rem;
  font-weight:600;
  border-radius:var(--radius-xs);
  background:var(--surface-strong);
  border:1px solid var(--line);
  color:var(--muted);
  font-family:var(--mono-font);
  text-transform:uppercase;
  letter-spacing:.08em
}
.source-actions {
  position:absolute;
  top:var(--space-md);
  right:var(--space-md);
  opacity:0;
  transition:opacity var(--transition-fast)
}
.source-card:hover .source-actions {
  opacity:1
}
.confidence {
  font-size:.75rem;
  color:var(--muted);
  margin-top:var(--space-sm)
}
.source-link {
  display:inline-flex;
  align-items:center;
  gap:6px;
  font-size:.8rem;
  color:var(--accent);
  margin-top:var(--space-sm)
}
.timeline {
  display:flex;
  flex-direction:column;
  gap:var(--space-lg);
  padding-left:var(--space-lg);
  border-left:2px solid var(--line);
  margin-left:var(--space-sm)
}
.timeline-event {
  position:relative;
  padding-left:var(--space-lg)
}
.timeline-event:before {
  content:"";
  position:absolute;
  left:calc(-1 * var(--space-lg) - 5px);
  top:6px;
  width:10px;
  height:10px;
  border-radius:var(--radius-full);
  background:var(--accent);
  border:2px solid var(--surface);
  box-shadow:var(--shadow-sm)
}
.timeline-date {
  font-size:.75rem;
  font-weight:600;
  color:var(--muted);
  margin-bottom:var(--space-xs)
}
.timeline-title {
  font-size:1rem;
  font-weight:600;
  margin:0 0 var(--space-xs)
}
.timeline-detail {
  font-size:.9rem;
  color:var(--muted);
  margin:0
}
.workspace-view {
  display:flex;
  flex-direction:column;
  gap:var(--space-lg)
}
.workspace-actions {
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:var(--space-sm);
  flex-wrap:wrap;
  justify-self:end
}
.workspace-topbar {
  display:grid;
  grid-template-columns:auto 1fr auto;
  align-items:center;
  gap:var(--space-lg);
  padding:var(--space-md) var(--space-lg);
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  background:var(--surface);
  box-shadow:var(--shadow-sm);
  margin-bottom:var(--space-lg)
}
.workspace-context {
  font-family:var(--mono-font);
  font-size:.75rem;
  color:var(--muted);
  display:flex;
  align-items:center;
  gap:var(--space-sm);
  justify-self:center
}
.workspace-view-toggle {
  display:inline-flex;
  gap:2px;
  padding:2px;
  border:1px solid var(--line);
  border-radius:var(--radius-sm);
  background:var(--surface-strong)
}
.workspace-view-toggle .btn {
  padding:6px 10px;
  font-size:.75rem;
  box-shadow:none
}
.workspace-view-toggle .btn.primary {
  background:var(--surface);
  color:var(--ink);
  border-color:var(--accent)
}
.workspace-view-toggle .btn:hover, .workspace-view-toggle .btn:active {
  transform:none;
  box-shadow:none
}
.workspace-view-toggle .btn.primary:hover {
  background:var(--surface)
}
.workspace-header {
  text-align:left;
  margin-bottom:var(--space-lg)
}
.workspace-header h1 {
  margin-bottom:var(--space-sm)
}
.workspace-layout {
  display:grid;
  grid-template-columns:1fr;
  gap:var(--space-xl);
  align-items:start
}
.workspace-layout.two-column {
  grid-template-columns:minmax(240px, var(--workspace-rail-left)) minmax(0, 1fr);
  grid-template-areas:"left center"
}
.workspace-layout.two-column .workspace-rail.left {
  grid-area:left
}
.workspace-layout.two-column .workspace-canvas {
  grid-area:center
}
.workspace-layout.two-column .workspace-rail.right {
  grid-area:right
}
@media(min-width:1280px) {
  .workspace-layout.two-column {
    grid-template-columns:var(--workspace-rail-left) minmax(0, 1fr) var(--workspace-rail-right);
    grid-template-areas:"left center right"
  }

}
@media(min-width:1440px) {
  .workspace-layout.two-column {
    grid-template-columns:320px minmax(0, 1fr) 360px
  }

}
@media(min-width:1920px) {
  .workspace-layout.two-column {
    grid-template-columns:340px minmax(0, 1fr) var(--workspace-rail-right-xl)
  }

}
@media(max-width:1279px) {
  .workspace-layout.two-column {
    grid-template-areas:"left center" "right right"
  }
  .workspace-layout.two-column .workspace-rail.right {
    grid-column:1 / -1
  }
  .workspace-rail.right {
    position:static
  }

}
@media(max-width:960px) {
  .workspace-layout.two-column {
    grid-template-columns:1fr;
    grid-template-areas:"center" "left" "right"
  }
  .workspace-rail {
    position:static
  }

}
.workspace-layout.focus {
  grid-template-columns:minmax(0, 1fr)
}
.workspace-layout.focus .workspace-canvas {
  width:100%;
  max-width:1280px;
  margin:0 auto;
  display:grid;
  grid-template-columns:minmax(0, 1fr);
  gap:var(--space-lg)
}
@media(min-width:1200px) {
  .workspace-layout.focus .workspace-canvas {
    grid-template-columns:minmax(0, 1fr) minmax(280px, 360px);
    align-items:start
  }
  .workspace-layout.focus .workspace-canvas > * {
    grid-column:1
  }
  .workspace-layout.focus .workspace-chat {
    grid-column:2;
    grid-row:1 / span 30;
    position:sticky;
    top:calc(var(--header-height) + var(--space-lg))
  }

}
.workspace-rail {
  display:flex;
  flex-direction:column;
  gap:var(--space-md);
  align-self:start;
  position:sticky;
  top:calc(var(--header-height) + var(--space-lg));
  min-width:0
}
.rail-card {
  box-shadow:var(--shadow-sm)
}
.workspace-rail .rail-card:hover {
  transform:none;
  box-shadow:var(--shadow-sm)
}
.workspace-context-card p {
  margin-bottom:var(--space-sm)
}
.workspace-context-card p:last-child {
  margin-bottom:0
}
.workspace-canvas {
  display:flex;
  flex-direction:column;
  gap:var(--space-lg);
  min-width:0
}
.canvas-card {
  min-height:400px;
  box-shadow:var(--shadow-md);
  border-color:var(--line-strong)
}
.panel-card.expandable.canvas-card {
  min-height:0
}
.canvas-card:hover {
  transform:none;
  box-shadow:var(--shadow-md)
}
.focus-panel:hover {
  transform:none;
  box-shadow:var(--shadow-sm)
}
.narrative-toolbar {
  display:flex;
  gap:var(--space-sm);
  margin-bottom:var(--space-md);
  flex-wrap:wrap
}
.narrative-toolbar input {
  flex:1;
  min-width:200px
}
.editor-toolbar {
  display:flex;
  gap:var(--space-sm);
  margin-bottom:var(--space-md);
  flex-wrap:wrap
}
.editor-toolbar input {
  flex:1;
  min-width:200px
}
.workspace-tools, .workspace-details {
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  background:var(--surface);
  box-shadow:var(--shadow-sm);
  overflow:hidden
}
.workspace-tools>summary, .workspace-details>summary {
  cursor:pointer;
  list-style:none;
  padding:var(--space-md) var(--space-lg);
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:.12em;
  font-family:var(--mono-font);
  color:var(--muted);
  display:flex;
  align-items:center;
  justify-content:space-between;
  background:var(--surface-subtle)
}
.workspace-tools>summary::-webkit-details-marker, .workspace-details>summary::-webkit-details-marker {
  display:none
}
.workspace-tools>summary:after, .workspace-details>summary:after {
  content:"v";
  font-size:.8rem;
  transition:transform var(--transition-base)
}
.workspace-tools[open]>summary, .workspace-details[open]>summary {
  border-bottom:1px solid var(--line)
}
.workspace-tools[open]>summary:after, .workspace-details[open]>summary:after {
  transform:rotate(180deg)
}
.workspace-tools-body, .workspace-details-body {
  display:flex;
  flex-direction:column;
  gap:var(--space-md);
  padding:var(--space-md)
}
.workspace-details .panel-card:hover {
  transform:none;
  box-shadow:var(--shadow-sm)
}
.tool-section {
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  background:var(--surface)
}
.tool-section:hover {
  transform:none;
  box-shadow:none;
  border-color:var(--line-strong)
}
.tool-section>summary {
  cursor:pointer;
  list-style:none;
  padding:var(--space-md);
  font-weight:600;
  font-family:var(--mono-font);
  text-transform:uppercase;
  letter-spacing:.08em;
  font-size:.7rem;
  display:flex;
  align-items:center;
  justify-content:space-between
}
.tool-section>summary::-webkit-details-marker {
  display:none
}
.tool-section[open]>summary {
  border-bottom:1px solid var(--line)
}
.tool-body {
  padding:var(--space-md)
}
.tool-list {
  display:flex;
  flex-direction:column;
  gap:var(--space-sm)
}
.tool-text {
  color:var(--ink-secondary);
  font-size:.85rem
}
.tool-input {
  width:100%
}
.tool-select {
  width:auto;
  min-width:140px
}
.tool-meta {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--space-sm);
  margin-top:var(--space-sm)
}
.tool-actions {
  display:flex;
  gap:var(--space-sm)
}
.snippet-form {
  display:flex;
  flex-direction:column;
  gap:var(--space-sm)
}
.snippet-actions {
  display:flex;
  align-items:center;
  gap:var(--space-sm);
  flex-wrap:wrap
}
.workspace-chat {
  box-shadow:var(--shadow-sm)
}
.workspace-chat:hover {
  transform:none;
  box-shadow:var(--shadow-sm)
}
.chat-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--space-md);
  margin-bottom:var(--space-md)
}
.chat-scope {
  display:flex;
  gap:var(--space-sm)
}
.chat-input {
  display:flex;
  flex-direction:column;
  gap:var(--space-sm)
}
.tool-item {
  padding:var(--space-sm) var(--space-md);
  border-radius:var(--radius-sm);
  background:var(--surface);
  border:1px solid var(--line);
  font-size:.85rem;
  transition:transform var(--transition-fast), box-shadow var(--transition-fast), border-color var(--transition-fast)
}
.tool-item:hover {
  border-color:var(--line-strong);
  box-shadow:var(--shadow-sm);
  transform:translateY(-1px)
}
.chat {
  display:flex;
  flex-direction:column;
  gap:var(--space-md)
}
.chat-thread {
  display:flex;
  flex-direction:column;
  gap:var(--space-sm);
  max-height:300px;
  overflow-y:auto;
  padding-right:var(--space-sm)
}
.chat-line {
  padding:var(--space-md);
  border-radius:var(--radius-md);
  background:var(--surface);
  border:1px solid var(--line);
  position:relative;
  overflow:hidden
}
.chat-line:before {
  content:"";
  position:absolute;
  left:0;
  top:8px;
  bottom:8px;
  width:3px;
  background:var(--line-strong);
  pointer-events:none
}
.chat-line.ai {
  background:var(--accent-2-soft);
  border-color:transparent
}
.chat-line.ai:before {
  background:var(--accent)
}
.chat-line .role, .chat-role {
  font-size:.7rem;
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:.05em;
  color:var(--muted);
  margin-bottom:var(--space-xs)
}
.chat-line p {
  margin:0;
  font-size:.9rem
}
.chat-form {
  display:flex;
  gap:var(--space-sm)
}
.chat-form input {
  flex:1
}
.modal-scrim {
  position:fixed;
  inset:0;
  background:rgba(0, 0, 0, .45);
  z-index:200;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:var(--space-lg)
}
.modal {
  background:var(--surface);
  border-radius:var(--radius-md);
  border:1px solid var(--line);
  box-shadow:var(--shadow-md);
  width:100%;
  max-width:720px;
  max-height:90vh;
  overflow-y:auto;
  animation:modalIn .3s ease
}
.modal-card {
  display:flex;
  flex-direction:column
}
@keyframes modalIn {
  0% {
    opacity:0;
    transform:scale(.95) translateY(10px)
  }
  to {
    opacity:1;
    transform:scale(1) translateY(0)
  }

}
.modal-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:var(--space-lg);
  border-bottom:1px solid var(--line)
}
.modal-header h2, .modal-header h3 {
  margin:0;
  font-size:1.25rem
}
.modal-close {
  width:36px;
  height:36px;
  border-radius:var(--radius-sm);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition:all var(--transition-fast)
}
.modal-close:hover {
  background:var(--surface-strong)
}
.modal-body {
  padding:var(--space-lg)
}
.modal-actions {
  display:flex;
  justify-content:flex-end;
  gap:var(--space-sm);
  padding:var(--space-lg);
  border-top:1px solid var(--line);
  background:var(--surface-subtle)
}
.modal-footer {
  display:flex;
  justify-content:flex-end;
  gap:var(--space-sm);
  padding:var(--space-lg);
  border-top:1px solid var(--line)
}
.form-field {
  display:flex;
  flex-direction:column;
  gap:var(--space-sm);
  margin-bottom:var(--space-md)
}
.form-field label {
  font-size:.75rem;
  font-weight:600;
  color:var(--muted);
  text-transform:uppercase;
  letter-spacing:.08em;
  font-family:var(--mono-font)
}
.form-row {
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));
  gap:var(--space-md)
}
.library-toolbar {
  display:flex;
  gap:var(--space-md);
  flex-wrap:wrap;
  margin-bottom:var(--space-lg)
}
.library-grid {
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(240px, 1fr));
  gap:var(--space-md)
}
.library-card {
  background:var(--surface);
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  padding:var(--space-lg);
  transition:transform var(--transition-base), box-shadow var(--transition-base), border-color var(--transition-base);
  box-shadow:var(--shadow-sm)
}
.library-card:hover {
  border-color:var(--line-strong);
  transform:translateY(-2px);
  box-shadow:var(--shadow-md)
}
.phase-actions-row {
  display:flex;
  flex-wrap:wrap;
  gap:var(--space-sm);
  margin-top:var(--space-lg);
  padding-top:var(--space-lg);
  border-top:1px solid var(--line)
}
.stats-dashboard {
  margin-top:var(--space-lg);
  padding:var(--space-lg);
  background:var(--surface);
  border-radius:var(--radius-md);
  border:1px solid var(--line)
}
.stats-dashboard h3 {
  margin:0 0 var(--space-md)
}
.stats-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(100px, 1fr));
  gap:var(--space-md)
}
.stat-card {
  text-align:left;
  padding:var(--space-md);
  background:var(--surface);
  border-radius:var(--radius-sm);
  border:1px solid var(--line)
}
.stat-card .stat-number {
  display:block;
  font-size:1.4rem;
  font-weight:700;
  font-family:var(--display-font);
  color:var(--accent)
}
.stat-card .stat-label {
  display:block;
  font-size:.75rem;
  color:var(--muted);
  margin-top:var(--space-xs);
  font-family:var(--mono-font)
}
.suggestions-panel {
  margin-top:var(--space-lg);
  padding:var(--space-lg);
  background:var(--surface);
  border-radius:var(--radius-md);
  border:1px solid var(--line)
}
.suggestions-panel .panel-header h3 {
  margin:0
}
.suggestions-list {
  list-style:none;
  padding:0;
  margin:0
}
.suggestion-item {
  padding:var(--space-md);
  background:var(--surface);
  border-radius:var(--radius-sm);
  margin-bottom:var(--space-sm);
  font-size:.9rem;
  border-left:2px solid var(--accent);
  line-height:1.6
}
.suggestion-item:last-child {
  margin-bottom:0
}
.linked-panel {
  margin-top:var(--space-lg);
  padding:var(--space-lg);
  background:var(--surface);
  border-radius:var(--radius-md);
  border:1px solid var(--line)
}
.linked-panel .panel-header h3 {
  margin:0
}
.linked-items {
  display:flex;
  flex-wrap:wrap;
  gap:var(--space-sm)
}
.linked-item {
  display:inline-flex;
  align-items:center;
  gap:var(--space-sm);
  padding:var(--space-sm) var(--space-md);
  background:var(--surface);
  border:1px solid var(--line);
  border-radius:var(--radius-md)
}
.linked-section {
  font-size:.65rem;
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:.05em;
  padding:2px 6px;
  border-radius:var(--radius-xs);
  background:var(--accent-2-soft);
  color:var(--accent-2)
}
.linked-name {
  font-weight:500
}
.btn.ghost.small {
  padding:4px 8px;
  font-size:.75rem
}
.graph-container {
  position:fixed;
  inset:0;
  z-index:200;
  background:rgba(0, 0, 0, .45);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:var(--space-lg)
}
.graph-panel {
  background:var(--surface);
  border-radius:var(--radius-md);
  border:1px solid var(--line);
  width:100%;
  max-width:900px;
  max-height:90vh;
  overflow-y:auto;
  box-shadow:var(--shadow-md)
}
.graph-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:var(--space-lg);
  border-bottom:1px solid var(--line)
}
.graph-header h2 {
  margin:0
}
.graph-body {
  padding:var(--space-lg)
}
.graph-canvas {
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));
  gap:var(--space-lg);
  min-height:300px
}
.graph-section {
  display:flex;
  flex-direction:column;
  gap:var(--space-sm)
}
.graph-section-title {
  font-size:.75rem;
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:.08em;
  color:var(--muted);
  margin-bottom:var(--space-xs)
}
.graph-node {
  padding:var(--space-md);
  border-radius:var(--radius-md);
  border:2px solid var(--line);
  background:var(--surface);
  transition:all var(--transition-base)
}
.graph-node:hover {
  transform:translateY(-2px);
  box-shadow:var(--shadow-md)
}
.graph-node.phase {
  border-color:var(--accent);
  background:var(--accent-soft)
}
.graph-node.entity {
  border-color:var(--accent-2);
  background:var(--accent-2-soft)
}
.graph-node.linked {
  border-width:3px
}
.graph-node-title {
  font-weight:600;
  font-size:.9rem;
  margin-bottom:var(--space-xs)
}
.graph-node-meta {
  font-size:.8rem;
  color:var(--muted)
}
.graph-link-list {
  display:flex;
  flex-wrap:wrap;
  gap:var(--space-xs)
}
.connection-builder {
  display:flex;
  flex-direction:column;
  gap:var(--space-md)
}
.connection-list {
  display:flex;
  flex-direction:column;
  gap:var(--space-sm);
  max-height:300px;
  overflow-y:auto
}
.connection-item {
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:var(--space-md);
  padding:var(--space-md);
  background:var(--surface);
  border:1px solid var(--line);
  border-radius:var(--radius-sm)
}
.connection-title {
  font-weight:600;
  margin:0
}
.connection-note {
  font-size:.85rem;
  color:var(--muted);
  margin:var(--space-xs) 0 0
}
.empty-state {
  text-align:center;
  padding:var(--space-2xl);
  background:var(--surface);
  border:1px dashed var(--line);
  border-radius:var(--radius-md)
}
.empty-state h3 {
  margin-bottom:var(--space-sm)
}
.empty-state p {
  color:var(--muted);
  margin-bottom:var(--space-lg)
}
@keyframes fadeSlideUp {
  0% {
    opacity:0;
    transform:translateY(6px)
  }
  to {
    opacity:1;
    transform:translateY(0)
  }

}
[data-animate], .phase-card, .entity-card, .source-card, .note-card, .subphase-card, .category-card {
  animation:fadeSlideUp .25s ease both
}
.toast-container {
  position:fixed;
  bottom:var(--space-lg);
  right:var(--space-lg);
  display:flex;
  flex-direction:column;
  gap:var(--space-sm);
  z-index:300;
  max-width:400px
}
.toast {
  display:flex;
  align-items:center;
  gap:var(--space-md);
  padding:var(--space-md) var(--space-lg);
  background:var(--surface-solid);
  border-radius:var(--radius-sm);
  box-shadow:var(--shadow-sm);
  animation:toastIn .3s ease
}
@keyframes toastIn {
  0% {
    opacity:0;
    transform:translate(100%)
  }
  to {
    opacity:1;
    transform:translate(0)
  }

}
.toast.success {
  border-left:4px solid var(--toast-success)
}
.toast.error {
  border-left:4px solid var(--toast-error)
}
.toast.info {
  border-left:4px solid var(--toast-info)
}
.toast-message {
  flex:1;
  font-size:.9rem
}
.toast-close {
  cursor:pointer;
  opacity:.5;
  transition:opacity var(--transition-fast)
}
.toast-close:hover {
  opacity:1
}
.command-palette-scrim {
  position:fixed;
  inset:0;
  background:rgba(0, 0, 0, .45);
  z-index:250;
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding-top:15vh
}
.command-palette {
  background:var(--surface);
  border-radius:var(--radius-md);
  border:1px solid var(--line-strong);
  box-shadow:var(--shadow-lg);
  width:100%;
  max-width:600px;
  overflow:hidden;
  animation:modalIn .2s ease
}
.command-input {
  width:100%;
  padding:var(--space-lg);
  font-size:1.1rem;
  border:none;
  border-bottom:1px solid var(--line);
  background:var(--surface)
}
.command-input:focus {
  box-shadow:none
}
.command-list {
  max-height:400px;
  overflow-y:auto;
  padding:var(--space-sm)
}
.command-item {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:var(--space-md);
  border-radius:var(--radius-md);
  cursor:pointer;
  transition:background-color var(--transition-fast), border-color var(--transition-fast);
  border-left:3px solid transparent
}
.command-item:hover, .command-item.selected {
  background:var(--surface-strong);
  border-left:3px solid var(--accent)
}
.command-item-left {
  display:flex;
  align-items:center;
  gap:var(--space-md)
}
.command-icon {
  width:32px;
  height:32px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:var(--accent-soft);
  border-radius:var(--radius-sm);
  color:var(--accent)
}
.command-name {
  font-weight:500
}
.command-description {
  font-size:.85rem;
  color:var(--muted)
}
.command-shortcut {
  display:flex;
  gap:4px
}
.command-shortcut kbd {
  padding:4px 8px;
  font-size:.75rem;
  background:var(--surface);
  border:1px solid var(--line);
  border-radius:var(--radius-xs);
  font-family:var(--body-font)
}
.breadcrumbs {
  display:flex;
  align-items:center;
  gap:var(--space-sm);
  font-size:.7rem;
  font-family:var(--mono-font);
  text-transform:uppercase;
  letter-spacing:.08em
}
.breadcrumb {
  color:var(--muted);
  cursor:pointer;
  transition:color var(--transition-fast)
}
.breadcrumb:hover {
  color:var(--ink)
}
.breadcrumb.current {
  color:var(--ink);
  font-weight:600
}
.breadcrumb-sep {
  color:var(--muted-soft)
}
@media(max-width:768px) {
  .topbar, .shell {
    padding:var(--space-md)
  }
  .phase-layout, .entity-layout {
    grid-template-columns:1fr
  }
  .phase-hero {
    flex-direction:column
  }
  .workspace-layout.two-column, .home-layout, .subphase-layout {
    grid-template-columns:1fr
  }
  .workspace-topbar {
    grid-template-columns:1fr;
    justify-items:start
  }
  .workspace-context {
    justify-self:start
  }
  .workspace-actions {
    justify-content:flex-start
  }
  .phase-meta-actions {
    width:100%;
    justify-content:flex-start
  }
  .search {
    min-width:auto;
    flex:1
  }
  .brand-name {
    font-size:1rem
  }

}
@media(max-width:480px) {
  .topbar-actions {
    gap:var(--space-xs)
  }
  .btn {
    padding:8px 14px;
    font-size:.85rem
  }
  .phase-tabs {
    flex-wrap:wrap
  }
  .form-row {
    grid-template-columns:1fr
  }

}
.muted {
  color:var(--muted)
}
.text-accent {
  color:var(--accent)
}
.text-accent-2 {
  color:var(--accent-2)
}
